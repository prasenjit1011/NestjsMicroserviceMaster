<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>FAQ</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script> <!-- Tailwind CDN -->
</head>
<body class="bg-gray-50 text-gray-800 p-6 font-sans leading-relaxed">

  <!-- Navigation -->
  <nav class="mb-6">
    <ul class="flex flex-wrap gap-6 text-blue-600 font-semibold">
      <li><a href="/doctor/index.html" class="hover:underline hover:text-blue-800">Nodejs</a></li>
      <li><a href="/doctor/react.html" class="hover:underline hover:text-blue-800">React</a></li>
      <li><a href="/doctor/docker.html" class="hover:underline hover:text-blue-800">Docker</a></li>
      <li><a href="https://onecompiler.com/nodejs/43hqq7r87" target="_blank" class="hover:underline hover:text-blue-800">Coding</a></li>
      <li><a href="/doctor/cmd.html" class="hover:underline hover:text-blue-800">CMD</a></li>
    </ul>
  </nav>

  <!-- Separator -->
  <div class="border-t-4 border-gray-300 my-8"></div>

  <!-- Content preformatted -->
  <pre class="whitespace-pre-wrap bg-white p-6 rounded shadow-md overflow-x-auto max-w-full font-mono text-sm">
### Start : Dockerfile ###
FROM ubuntu
MAINTAINER Prasenjit
RUN apt-get update
CMD ["Hello World", "CISPL"]
ENTRYPOINT ["New World", "CISPL"]
COPY index.html /tmp
ADD robots.txt /tmp
ADD http://test.com /my/path
WORKDIR /tmp
VOLUME /app
EXPOSE 80/tcp
EXPOSE 80/udp

### End : Dockerfile ###

### Start : docker-compose.yml ###
### apt install docker-compose

version: "v1"
services:
  rpn-web:
    image: httpd
    ports:
      -"8000:80"
    networks:
      -"rpn-network"
    volume:
      -"rpn-volume:/data"
  rpn-db:
    image: redis
    networks:
      -"rpn-network"
    volume:
      -"rpn-volume:/app"
networks:
  rpn-network: 
volumes:
  rpn-volume:


### End : docker-compose.yml ###

### For Windows ###
enable window 
Trun window feature on / off
Window subsystem for Linux

## Install WSL
wsl --install
wsl -l -v 

ctrl+shift+esc
Perforamance -> Enable Virtualization

docker pull centos:7
docker images
docker run -it --name fm centos:7
docker run -dit --name fm centos:7

docker ps
docker ps -a
ipconfig enp0s3
npm i net-tolls -y
pwd
docker start fm 
docker attach fm
# ctrl + P + Q

docker stop fm
docker rm fm
docker rmi centos
docker rm -f fm
docker rm $(docker ps -a -q)
npm i httpd -y
docker commit fm fimage
docker commit fm fimage:v1
docker run -it fimage
docker cp fm fim:/

docker push prasenjitaluni/nestjsmaster:step01
docker tag a18f183084ec prasenjitaluni/nestjsmaster:v1
docker tag bf728bb327e1 prasenjitaluni/nestjsmaster:v1

## Docker CMD List

# Step 01 : Start Docker Desktop as Administrator
# Check docker status : 
docker --version

# Pull docker images ubuntu, centos, nginx .... 
docker pull nginx
# Run docker image : 
docker run nginx
### CMD : Run docker image in deattached mode : 
docker run -d nginx
### **  : It create docker container

### CMD : Running Container List    : 
docker ps
docker container ls -a

# Available Container List  : 
docker ps -a

# Delete unsed container / image  : 
docker container prune
docker image prune

# Restart Container
docker start mynginx
docker stop mynginx

# Remove Container  : 
docker remove mynginx

# Docker with port binding : 
docker run -d --rm --name -p 8080:80  mynginx nginx

### CMD : Docker Log File : 
docker logs -f mynginx

### CMD : Container config check : 
docker inspect mynginx

### CMD : GoTo inside of container : 
docker exec -it mynginx bash

### CMD : 
docker run --name rpn-web-3 --cap-add=NET_ADMIN -it -net rpn-network -d httpd

### CMD : Ping to container with name ( != ip ) :  
nslookup jenkins

netstat -ntplu / -ntpl
iptables-save 
iptables-legacy-save
docker run --name rpn-webserver -p 80:80 --net rpn-network -d httpd 
docker container exec -it rpn-webserver /bin/bash
What port are exposed publicly : docker port rpn-webserver 
docker container ls | grep rpn-webserver
docker build -t rpn-image:v1 .
docker images | grep rpn-image


### Important
### Create container from ubuntu : 
docker run --name rpn-web -it ubuntu /bin/bash

### Create image from container (rpn-web), id f25290 , we can share image with other : 
docker container --author "Prasenjit" -m "myimg from rpn-web" f25290 rpn-myimg

### Container List : 
docker container ls -a

### Image List : 
docker images

### Create container from Global ubuntu : 
docker run --name rpn-web -it ubuntu /bin/bash

### Create container from Custom/Local rpn-myimg : 
docker run --name rpn-newweb -it myimg /bin/bash

docker save -o /home/ubuntu/rpn-myimg.tar rpn-myimg

### Push image to docker hub: 
docker image tag rpn-myimg tester/rpn-myimg:v1

### Push image to docker hub: 
docker push tester/rpn-myimg:v1

### Docker compose
### Remove unused network : 
docker network prune
docker-compose -v

### CMD : Syntax check of .yml : 
docker-compose config
### CMD : Create container from multiple image(httpd, redis) of docker-compose.yml : 
docker-compose up -d
docker-compose down
docker-compose up -d --scale rpn-db=5

## Docker CMD List
# Docker Redis : 
docker pull redis:alpine
docker run -it -p 6379:6379 -d --name redis-server redis:alpine

## NodeJS Project : npm i redis
## express version : 4.17.1
## redis version : 3.0.2

### Network
### CMD : ifconfig / ip a s
### docker0 : eth0 : lo ?
### CMD : 
docker network inspect bridge 
docker run --name rpn-web -d httpd
docker run --name rpn-db -c MYSQL_ROOT_PASSWORD=rpnpwd -d mysql
docker network inspect bridge 
brctl show

### IPADDRESS

docker network create rpn-bridge
docker network inspect rpn-bridge
docker network create --subnet 10.7.0.9/16 --gateway 10.7.7.7 rpn-network
docker run --name rpn-web-new --net=rpn-network -d httpd
docker run --name jenkins --net=rpn-network -d jenkins
docker network inspect bridge rpn-network
docker network connect bridge rpn-web-new
nslookup jenkins
cat /etc/resolv.conf
netstat ntplu

docker run --name rpn-web-3 --cap-add=NET_ADMIN -it --net rpn-network -d httpd

### CMD : *** tcp, udp, DNAT, SNAT ? : iptables-legacy-save
### CMD : Embedded DNS server

############################################################################################3333333

docker images
docker container ls -a
ifconfig
** eth0:172.31.37.43
** docker0:172.17.0.1 ( Gateway IP ), its default bridge
** Subnet IP range 172.17.0.1/16

ip a s
docker network ls
docker network inspect bridge
docker run --name rpn-web -d httpd
docker run --name rpn-db -c MYSQL_ROOT_PASSWORD=rpnpwd -d mysql
docker container ls -a
ip a s
btctl show
docker container inspect rpn-web
docker container exec -it rpn-web /bin/bash
ping "172.17.0.3"

## ## ## ## ## ## ## ## ## ## ## ## 

docker network create rpn-bridge
docker network create --subnet 10.7.0.0/16 --gateway 10.7.7.7 rpn-network
docker network ls
ifconfig
# docker0, rpn-network

docker run --name rpn-web-new --net=rpn-network -d httpd
docker run --name jenkins --net=rpn-network -d jenkins
docker network inspect rpn-network

docker network connect bridge rpn-web-new
nslookup jenkins

cat /etc/resolv.conf

##########################################################################################

docker run --name rpn-web-3 --cap-add=NET_ADMIN -it --net rpn-network -d httpd
#########################################################################################

# Serverless Deployment
npm install -g serverless
serverless create --template aws-nodejs --path my-service
cd my-service
npm init -y
npm install --save-dev serverless-offline
npm install aws-sdk

### Zip file for upload
zip -r my-service.zip *

serverless deploy
serverless invoke -f hello

## Write nodejs express API
npm i express
npm i serverless-http

#############################################################################################
# docker network inspect bridge
# docker network create --subnet=192.168.0.0/24 custom-network
# docker run --net custom-network ...
# docker network inspect custom-network

### docker logs -f container_name
### docker run --name rpn-web -d -p 80:80 httpd
### docker network ls
### docker ps -a
### docker images
### docker container prune
### docker image prune
### docker stop container_name
### docker rm container_name
### docker rmi image_name

### CMD
docker run --name rpn-web -d -p 80:80 httpd
docker exec -it rpn-web /bin/bash

</pre>

</body>
</html>
